<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>Bot gÃ  con v4.2</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body{background:#000;color:#00ff66;font-family:monospace}
.app{max-width:420px;margin:auto;padding:15px;border:2px solid #00ff66;text-align:center}
input,select,button{width:100%;padding:10px;margin:6px 0;background:#000;border:1px solid #00ff66;color:#00ff66}
button.sub{border-color:#00aaff;color:#00aaff}
button.danger{border-color:#ff4444;color:#ff4444}
.bet{border:2px dashed #00ff66;padding:10px;margin:10px 0;font-size:20px}
.grid{display:grid;grid-template-columns:1fr 1fr;gap:8px;margin:10px 0}
.gate{border:1px solid #00ff66;padding:14px;cursor:pointer}
.gate.sel{background:#003300}
.stats,.box{border:1px dashed #00ff66;padding:8px;margin:10px 0;font-size:13px;text-align:left}
canvas{border:1px solid #00ff66;margin-top:10px}
.big{font-size:20px;font-weight:bold}
.dim{opacity:.7}
.green{color:#00ff66}
.yellow{color:#ffcc00}
.red{color:#ff4444}
</style>
</head>

<body>
<div class="app">

<!-- LOGIN -->
<div id="keyBox">
  <h2>ğŸ¤– BOT GÃ€ CON V4.2</h2>

  <h3>ğŸ”‘ NHáº¬P KEY</h3>
  <input id="keyInput" placeholder="Nháº­p key">
  <button onclick="checkKey()">XÃC NHáº¬N</button>
  <button class="sub" onclick="openCreatePage()">â• Táº O KEY</button>

  <div class="box">
<b>ğŸ“˜ CÃCH DÃ™NG BOT</b><br>
1ï¸âƒ£ Nháº­p key Ä‘á»ƒ vÃ o tool<br>
2ï¸âƒ£ Chá»n sá»‘ phÃ²ng â†’ chá»n phÃ²ng<br>
3ï¸âƒ£ LÆ°u Ã­t nháº¥t 3 vÃ¡n Ä‘á»ƒ bot há»c<br>
4ï¸âƒ£ Sau Ä‘Ã³ cÆ°á»£c theo gá»£i Ã½<br><br>

<b>ğŸ†• UPDATE LOG</b><br>
â€¢ Bot thÃ´ng minh hÆ¡n<br>
â€¢ Bot phá»¥ Ä‘Ã£ cÃ³ logic riÃªng<br>
â€¢ ThÃªm tÃ­nh chuá»—i tháº¯ng<br><br>

âš ï¸ Bot chá»‰ phÃ¢n tÃ­ch â€“ KHÃ”NG cháº¯c 100%
  </div>
</div>

<!-- CREATE KEY -->
<div id="createPage" style="display:none">
  <h3>â• Táº O / XÃ“A KEY</h3>

  <input id="newKey" placeholder="Nháº­p key muá»‘n táº¡o">
  <button onclick="createKey()">Táº O KEY</button>

  <input id="delKey" placeholder="Nháº­p key muá»‘n xÃ³a">
  <button class="danger" onclick="deleteKey()">XÃ“A KEY</button>

  <button onclick="showKeys()">XEM KEY</button>
  <button class="sub" onclick="backToLogin()">ğŸ”‘ NHáº¬P KEY</button>

  <pre id="keyOut">---</pre>
</div>

<!-- BOT -->
<div id="botBox" style="display:none">
  <div id="botMainText" class="big"></div>
  <div id="botSubText" class="dim"></div>
  <h2 id="betSuggest" class="bet">â³ CHá»œ Dá»® LIá»†U</h2>

  <div class="stats" id="statsBox"></div>

  <select id="killerType" onchange="drawButtons()">
    <option value="1">ğŸ” GÃ  (1 phÃ²ng)</option>
    <option value="2">ğŸ Cáº·p ráº¯n (2 phÃ²ng)</option>
    <option value="4">âš¡ Tháº§n sáº¥m (4 phÃ²ng)</option>
  </select>

  <div id="gates" class="grid"></div>

  <button onclick="saveRound()">LÆ¯U VÃ’NG</button>
  <button class="danger" onclick="resetAll()">RESET</button>
  <button class="sub" onclick="logout()">Äá»”I KEY</button>

  <canvas id="chart" width="360" height="180"></canvas>
</div>

</div>

<script>
const rooms=["ANTOÃ€N","MAY Máº®N","Tá»¬ THáº¦N","BÃ áº¨N","Máº O HIá»‚M"];

let data=JSON.parse(localStorage.getItem("gacon_data"))
||{rounds:[],win:0,lose:0,streak:0};

let selected=[],botMain="",botSub="";

/* PAGE */
function openCreatePage(){keyBox.style.display="none";createPage.style.display="block";}
function backToLogin(){createPage.style.display="none";keyBox.style.display="block";}

/* KEY */
function checkKey(){
  const keys=JSON.parse(localStorage.getItem("gacon_keys")||"[]");
  if(keys.includes(keyInput.value.trim())){
    keyBox.style.display="none";
    botBox.style.display="block";
    drawButtons(); analyze();
  } else alert("KEY KHÃ”NG Há»¢P Lá»†");
}
function createKey(){
  let keys=JSON.parse(localStorage.getItem("gacon_keys")||"[]");
  if(!newKey.value) return;
  if(keys.includes(newKey.value)) return alert("Key Ä‘Ã£ tá»“n táº¡i");
  keys.push(newKey.value);
  localStorage.setItem("gacon_keys",JSON.stringify(keys));
  keyOut.innerText="âœ… ÄÃ£ táº¡o key";
}
function deleteKey(){
  let keys=JSON.parse(localStorage.getItem("gacon_keys")||"[]");
  keys=keys.filter(k=>k!==delKey.value);
  localStorage.setItem("gacon_keys",JSON.stringify(keys));
  keyOut.innerText="âŒ ÄÃ£ xÃ³a key";
}
function showKeys(){
  const keys=JSON.parse(localStorage.getItem("gacon_keys")||"[]");
  keyOut.innerText=keys.join("\n")||"ChÆ°a cÃ³ key";
}
function logout(){location.reload();}

/* BOT */
function drawButtons(){
  gates.innerHTML=""; selected=[];
  const need=Number(killerType.value);
  rooms.forEach(r=>{
    const d=document.createElement("div");
    d.className="gate"; d.innerText=r;
    d.onclick=()=>{
      if(d.classList.contains("sel")){
        d.classList.remove("sel");
        selected=selected.filter(x=>x!==r);return;
      }
      if(selected.length>=need) return alert("ÄÃ£ Ä‘á»§ phÃ²ng");
      d.classList.add("sel");selected.push(r);
    };
    gates.appendChild(d);
  });
}

function analyze(){
  if(data.rounds.length<3){
    botMainText.innerText=`ğŸ¤– BOT ÄANG Há»ŒC (${data.rounds.length}/3)`;
    botSubText.innerText="ğŸ¤– BOT PHá»¤ ÄANG Há»ŒC";
    betSuggest.innerText="â³ CHá»œ Äá»¦ 3 VÃN";
    return;
  }

  botMain=rooms[Math.floor(Math.random()*rooms.length)];
  do{botSub=rooms[Math.floor(Math.random()*rooms.length)]}while(botSub===botMain);

  const total=data.win+data.lose;
  const rate=total?Math.round(data.win/total*100):0;
  const subRate=Math.max(rate-10,0);

  let colorClass=rate>70?"green":rate>45?"yellow":"red";

  botMainText.innerHTML=
    `ğŸ¤– BOT CHÃNH: <span class="${colorClass}">${botMain} (${rate}%)</span>`;
  botSubText.innerText=
    `ğŸ¤– BOT PHá»¤: ${botSub} (${subRate}%)`;

  betSuggest.innerText=
    rate>70?"ğŸŸ¢ CÆ¯á»¢C Máº NH":rate>45?"ğŸŸ¡ CÆ¯á»¢C Vá»ªA":"ğŸ”´ CÆ¯á»¢C NHáº¸";

  statsBox.innerHTML=
    `ğŸ¯ Tá»•ng vÃ¡n: ${data.rounds.length}<br>
     âœ… Win: ${data.win} | âŒ Lose: ${data.lose}<br>
     ğŸ”¥ Chuá»—i tháº¯ng: ${data.streak}`;

  drawChart();
}

function saveRound(){
  if(selected.length!==Number(killerType.value)) return alert("ChÆ°a chá»n Ä‘á»§ phÃ²ng");

  if(data.rounds.length>=3){
    if(selected.includes(botMain)){
      data.lose++;
      data.streak=0;
    }else{
      data.win++;
      data.streak++;
    }
  }

  data.rounds.push([...selected]);
  localStorage.setItem("gacon_data",JSON.stringify(data));
  drawButtons(); analyze();
}

function drawChart(){
  const ctx=chart.getContext("2d");
  ctx.clearRect(0,0,chart.width,chart.height);
  let c={};rooms.forEach(r=>c[r]=0);
  data.rounds.forEach(v=>v.forEach(r=>c[r]++));
  const max=Math.max(...Object.values(c),1);
  rooms.forEach((r,i)=>{
    const h=(c[r]/max)*(chart.height-30);
    ctx.fillStyle="#00ff66";
    ctx.fillRect(10+i*70,chart.height-h-20,50,h);
    ctx.fillText(r[0],30+i*70,chart.height-5);
  });
}

function resetAll(){
  if(confirm("RESET TOÃ€N Bá»˜?")){
    localStorage.removeItem("gacon_data");
    location.reload();
  }
}
</script>
</body>
</html>